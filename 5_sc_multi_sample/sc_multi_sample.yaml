# Usage : nextflow run /data/humangen_mouse/scpipeline/src/sc_multi_sample.nf -params-file /data/humangen_mouse/scpipeline/sc_multi_sample.yaml --id ${SCRATCH/"/scratch/"/}

# Provide full path to the "xxx_normalized.rds" files generated by the sc_p_sample_main.sh pipeline. Seperate files in new lines with "-" bullet points.
# Note if integrating using integrate_seurat_algorith = "rpca", provide full path to "xxx_dim_reduction.rds" instead
in_seurat_rds:
- "/data/humangen_singlecell/Stelzer/sc_p_sample//9_seurat_dim_red/bone_femoral_head-false-2-2_dim_reduction.rds"
- "/data/humangen_singlecell/Stelzer/sc_p_sample//9_seurat_dim_red/scaffold-false-1-3_dim_reduction.rds"
- "/data/humangen_singlecell/Stelzer/sc_p_sample//9_seurat_dim_red/scaffold-false-2-4_dim_reduction.rds"

# Set the number of computing cores. Hardwired to 8. Do not change if you didn't change the internal script
ncores: 8

# Parameters for the pipeline

# Merging or Integration
task: "integrate-harmony"       # Choose: merge, integrate-seurat, integrate-harmony
integrate_seurat_algorithm: "cca" # [optional] Default cca. Choose from cca,rpca, or <blank>. Use rpca for large datasets and large number of samples to integrate
method: "standard"              # Choose: standard or SCT, Use the same method used to process single sample if task = "integrate-seurat"
project: "Geissler_Stelzer_bone" # Name of the merged or integrated dataset. Used to name output file. No "_" allowed
nhvg: 3000                      # Number of relevant features. Used for all three tasks
npcs: 40                        # Required only for integrate-seurat or integrate-harmony. Number of PCs.
nclust: 18                        # Required only for integrate-harmony
reference: 1                     # [optional] The # of the sample(s) to be used as the reference during integration. Used only for task integrate-seurat, Provide comma seperated values if you have more than 1 reference. Leave it empty if not inegrating with reference
integrateBy: "condition"         # Only for integrate-harmony task and for integrate-seurat task (when method is "standard"). This is usually "orig.ident", "group", or "replicate", but can be any other metadata names.
sampleTree:                     # [optional, Advanced syntax] Specify the order of integration for integrate-seurat
covars:                         # [optional] Which metadata to regress out? Comma separated. Used for all tasks

# dim_reduction

#cluster
res: "0.05,0.1,0.2,0.5,1,1.5"

#DE genes
min_cell_group: 5
min_pct: 0.05
logfc_threshold: 0.1
res_de_genes: 0.05
test_use: 'wilcox' # 'roc','wilcox' (default in Seurat),'negbin'
features: #List of genes to be visualized in UMAP space(comma seperated value)
no_of_pages:  # Number of pages to split the genes for feature plot
# Folder where results should be saved. Need not exist
outfolder: "/data/humangen_singlecell/Stelzer/sc_multi_sample/"
